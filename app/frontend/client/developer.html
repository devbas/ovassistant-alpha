<html>
<head>
  <link rel="stylesheet" id="style" href="./style.css" type="text/css" media="all">
  <link rel="stylesheet" id="style" href="./bootstrap.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="style" href="./animate.css" type="text/css" media="all">
  <link href="https://fonts.googleapis.com/css?family=Barlow:400,600,700" rel="stylesheet">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-38394966-4"></script>
  <script
    src="./libs/jquery-2.1.3.min.js"
    crossorigin="anonymous">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-38394966-4');
  </script>
  <script>
    $(document).ready(function() {
      $('#validation-submit').on('click', function(e) {
        e.preventDefault()
        $.ajax({
          // Your server script to process the upload
          url: '/api/v1/dev/ingestion/file',
          type: 'POST',

          // Form data
          data: new FormData($('form')[0]),

          // Tell jQuery not to process data or worry about content-type
          // You *must* include these options!
          cache: false,
          contentType: false,
          processData: false,

          // Custom XMLHttpRequest
          xhr: function () {
            $('#step-two-box').css('display', 'block')
            $('#file-status-success').css('display', 'none')
            $('#file-status-error').css('display', 'none')
            $('#file-status-processing').css('display', 'block')
            var myXhr = $.ajaxSettings.xhr();
            if (myXhr.upload) {
              // For handling the progress of the upload
              myXhr.upload.addEventListener('progress', function (e) {
                if (e.lengthComputable) {
                  $('progress').attr({
                    value: e.loaded,
                    max: e.total,
                  });
                }
              }, false);
            }
            console.log('myXhr: ', myXhr)
            return myXhr;
          }
        }).done(function(data) {
          $('#file-status-processing').css('display', 'none')
          $('#file-status-success').css('display', 'block')
          $('#step-three-box').css('display', 'block')
          console.log('data: ', data)
        }).fail(function(err) {
          $('#file-status-processing').css('display', 'none')
          $('#file-status-error').css('display', 'block')
          console.log('error: ', err) 
        })
      })
    })
  </script>
  <title>Delight travellers with Nearest.</title>
</head>
<body>
  <div class="page">
    <header>
      <div class="container">
        <div class="row">
          <div class="col-md-10 col-md-offset-1">
            <div class="pull-left">
              <div class="logo"></div>
            </div>
            <div class="pull-right">
              <a href="https://docs.lionoda.com" class="docs-header">
                <div class="docs-header-label">API Docs</div>
              </a>
              <a href="/users" class="devportal-header">
                <div class="docs-header-label">Users</div>
              </a>
              <a href="/segments" class="devportal-header">
                <div class="docs-header-label">Segments</div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>
  
    <div class="container">
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <div class="title-box">
            <h2 class="charcoal" style="margin: 0;">Algorithm Playground</h2>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <div class="superhero-box">
            <div class="row">
              <div class="col-md-12">
                <div class="superhero-secundary">
                  <div class="row">
                    <div class="col-md-11 col-sm-6">
                      <div class="title">
                        <h2 class="charcoal"></h2>
                      </div>
                      <div class="description" style="margin-bottom: 10px;">
                        <strong>1. Upload a CSV file.</strong></br>
                        <p style="margin-top: 3px;">Test the Nearest algorithm by uploading a CSV file. Make sure the CSV file has the markup as defined below, divided by a comma. The first row is not skipped.<br/><br/>
                          <table>
                            <thead>
                              <tr>
                                <td><strong>Key</strong></td>
                                <td><strong>Description</strong></td>
                                <td><strong>Status</strong></td>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td style="font-family: 'Courier'; margin-right: 20px; margin-top: 3px; margin-bottom: 3px; float: left; ">Latitude</td>
                                <td style="margin-right: 15px;">GPS Latitude, expressed in radians.</td>
                                <td>Required</td>
                              </tr>
                              <tr>
                                <td style="font-family: 'Courier'; margin-right: 20px; margin-top: 3px; margin-bottom: 3px; float: left; ">Longitude</td>
                                <td style="margin-right: 15px;">GPS Longitude, expressed in radians.</td>
                                <td>Required</td>
                              </tr>
                              <tr>
                                <td style="font-family: 'Courier'; margin-right: 20px; margin-top: 3px; margin-bottom: 3px; float: left; ">Datetime</td>
                                <td style="margin-right: 15px;">Datetime of the measured GPS location, expressed in a UNIX timestamp.</td>
                                <td>Required</td>
                              </tr>
                              <tr>
                                <td style="font-family: 'Courier'; margin-right: 20px; margin-top: 3px; margin-bottom: 3px; float: left; ">Device ID</td>
                                <td style="margin-right: 15px;">Unique number to identify the device and correlate amongst events.</td>
                                <td>Required</td>
                              </tr>
                              <tr>
                                <td style="font-family: 'Courier'; margin-right: 20px; margin-top: 3px; margin-bottom: 3px; float: left; ">Class</td>
                                <td style="margin-right: 15px;">Boolean to indicate whether the device is labelled 'on-the-go'<br/>in a public vehicle or not.</td>
                                <td>Optional</td>
                              </tr>
                            </tbody>
                          </table>
                        </p>

                      </div>
                      <div class="email-box email left" id="email-box">
                        <!--  method="POST" action="/api/v1/dev/ingestion/file"  -->
                        <form enctype="multipart/form-data">
                          <input type="file" class="left" name="file" placeholder="Validation set" id="validation-set" accept=".csv"/>
                          <button class="instant-send left email-submit" name="validation-submit" id="validation-submit">Upload</button>
                        </form>
                        <br/><br/>
                        <div style="margin-top: 3px;">
                          <small><i>Currently only a small set of time ranges within The Netherlands<br/>are supported to validate against.</i></small>
                        </div>
                      </div>
                      <div class="description" style="float: left; width: 100%; display: none; " id="step-two-box">
                        <br/>
                        <strong>2. File Status</strong>
                        <div id="file-status-processing">
                          <p style="margin-top: 3px;">
                            <div style="
                              width: 45px; 
                              height: 45px; 
                              border-radius: 50px; 
                              background-color: #006372; 
                              float: left;
                              background-image: url(./img/animated-loader.svg);
                              background-position: 90% 50%;
                              background-size: 30px; 
                              background-repeat: no-repeat;
                            "></div>
                            <div style="float: left; margin-top: 12px; margin-left: 10px;"><i>Processing...</i></div>
                          </p>
                        </div>
                        <div id="file-status-error">
                          <p style="margin-top: 3px;">
                            <div style="
                              width: 45px; 
                              height: 45px; 
                              border-radius: 50px; 
                              background-color: #DC0000; 
                              float: left;
                              background-image: url(./img/error.svg);
                              background-position: center;
                              background-size: 15px; 
                              background-repeat: no-repeat;
                            "></div>
                            <div style="float: left; margin-top: 12px; margin-left: 10px;"><i>Something went wrong. Did you upload a correct CSV?</i></div>
                          </p>
                        </div>
                        <div id="file-status-success">
                          <p style="margin-top: 3px;">
                            <div style="
                              width: 45px; 
                              height: 45px; 
                              border-radius: 50px; 
                              background-color: #81C85B; 
                              float: left;
                              background-image: url(./img/correct-validated.svg);
                              background-position: center;
                              background-size: 20px; 
                              background-repeat: no-repeat;
                            "></div>
                            <div style="float: left; margin-top: 12px; margin-left: 10px;"><i>Successfully validated.</i></div>
                          </p>
                        </div>
                      </div>
                      <div class="description" style="float: left; width: 100%;" id="step-three-box">
                        <br/>
                        <strong>3. Results</strong>
                        <table>
                          <tr>
                            <td class="results-summary-header"># rows</td>
                            <td class="results-summary-header"># unique devices</td>
                            <td class="results-summary-header">Avg. datapoints per device</td>
                            <td class="results-summary-header">Std. datapoints per device</td>
                            <td class="results-summary-header">Accuracy</td>
                            <td class="results-summary-header">Precision</td>
                            <td class="results-summary-header">Recall</td>
                            <td class="results-summary-header">F1 Score</td>
                          </tr>
                          <tr>
                            <td id="amount-rows"></td>
                            <td id="amount-unique-devices"></td>
                            <td id="avg-datapoints-device"></td>
                            <td id="accuracy"></td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="container">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <h2 class="charcoal" style="margin-top: 80px;">To improve our product, we'd love to hear from you.</h2>
          <div class="questionnaire-box left full-width" id="questionnaire-box">
            <div class="progress-box">
              <div class="bar" id="progress-bar"></div>
              <div class="label charcoal" id="progress-label">Question <strong><span id="current-question-number">1</span></strong> of 3</div>
            </div>
            
            <input type="hidden" name="is-repetitive-ip" id="is-repetitive-ip" value=""/>
            <input type="hidden" name="identifier" id="identifier" value=""/>
            <div class="question-outer-box question-1" id="question-1">
              <div class="question-box">
                <div id="question" class="question charcoal">Are you currently looking to extract triples from text?</div>
              </div>
              <div class="answer-box left">
                <button 
                  type="radio"
                  class="instant-send answer agree" 
                  id="answer-agree" 
                  name="current-extract-triples" 
                  value="yes"
                  data-question="1"
                />
                <button 
                  type="radio" 
                  class="instant-send answer disagree" 
                  id="answer-disagree" 
                  name="current-extract-triples" 
                  value="no"
                  data-question="1"
                />
              </div>
            </div>
            <div class="question-outer-box question-2" id="question-2">
              <div class="question-box">
                <div id="question" class="question charcoal">Are you currently active in academic research?</div>
              </div>
              <div class="answer-box left">
                <button 
                  type="radio" 
                  class="instant-send answer agree" 
                  id="answer-agree" 
                  name="academic-research"
                  value="yes"
                  data-question="2"
                />
                <button 
                  type="radio" 
                  class="instant-send answer disagree" 
                  id="answer-disagree" 
                  name="academic-research"
                  value="no"
                  data-question="2"
                />
              </div>
            </div>
            <div class="question-outer-box question-3" id="question-3">
              <div class="question-box">
                <div id="question" class="question charcoal">Are you looking for experts to extract triples?</div>
              </div>
              <div class="answer-box left">
                <button 
                  type="radio" 
                  class="instant-send answer agree" 
                  id="answer-agree" 
                  name="looking-for-experts"
                  value="yes"
                  data-question="3"
                />
                <button 
                  type="radio" 
                  class="instant-send answer disagree" 
                  id="answer-disagree" 
                  name="looking-for-experts"
                  value="no"
                  data-question="3"
                />
              </div>
            </div>
            <div class="question-outer-box question-4" id="question-4">
              <div class="question-box">
                <div class="question charcoal"><div style="margin-top: 15px; margin-bottom: 7px;"><strong>Thank you for your feedback!</strong></div></div>
              </div>
            </div>
            <div class="question-outer-box question-5" id="question-5">
              <div class="question-box">
                <div class="question charcoal" style="margin-top: 25px; margin-bottom: 25px;"><strong>Thank you for subscribing. We'll be in touch.</strong></div>
              </div>
            </div> -->

    <div class="container" style="margin-top: 100px;">
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <footer>
            <div class="row">
              <div class="col-md-12">
                <!-- <div class="title">Want more information?</div>
                <div class="connect-intro">
                  <button><a href="mailto:bastiangeneugelijk@me.com">Send an email</a></button>
                  <a href="https://twitter.com/BGeneugelijk"><div class="twitter-icon"></div></a>
                  <button><a href="https://www.bastiangeneugelijk.com/ovassistant.html">Read the original blog post</a></button>
                </div> -->
              </div>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </div>

  <div class="portal-popup-box-login" style="display: none;">
      <div class="portal-popup-outerbox">
        <div class="portal-popup-innerbox">
          <div class="header">
            <div class="header-inner-box">
              <div class="title left">Login</div>
              <div class="close-icon right" onclick="onPopupClose()"></div>
            </div>
          </div>
          <div class="body">
            <form method="POST" action="/api/v1/dev/sessions/login" id="login-form">
              <div class="input-box">
                <label for="email" class="portal-popup-email-label">Email</label>
                <input type="text" name="email" id="login-email" class="portal-popup-email"/>
              </div>
              <div class="input-box">
                <label for="password" class="portal-popup-password-label">Password</label>
                <input type="password" name="password" id="login-password" class="portal-popup-password"/>
              </div>
              <div class="input-box">
                <input type="submit" class="portal-popup-submit" value="Login"/>
              </div>
            </form>
          </div>
          <div class="footer">
          </div>
        </div>
        <div class="portal-popup-outerfooter">
          <p>Dont have an account? <a onClick="onSignupSwitchClick()">Signup here</a></p>
        </div>
      </div>
    </div>
    <div class="portal-popup-box-signup" style="display: none;">
      <div class="portal-popup-outerbox">
        <div class="portal-popup-innerbox">
          <div class="header">
            <div class="header-inner-box">
              <div class="title left">Signup</div>
              <div class="close-icon right" onclick="onPopupClose()"></div>
              <!-- <div class="description">A basic account comes with 5 free users to play around with.</div> -->
            </div>
          </div>
          <div class="body">
            <form method="POST" action="/api/v1/dev/sessions/signup" id="signup-form">
              <div class="input-box">
                <label for="email" class="portal-popup-email-label">Email</label>
                <input type="text" name="email" id="signup-email" class="portal-popup-email"/>
              </div>
              <div class="input-box">
                <label for="password" class="portal-popup-password-label">Password</label>
                <input type="password" name="password" id="signup-password" class="portal-popup-password"/>
              </div>
              <div class="input-box">
                <input type="submit" class="portal-popup-submit" value="Signup"/>
              </div>
            </form>
          </div>
          <div class="footer">
            
          </div>
        </div>
        <div class="portal-popup-outerfooter">
          <p>Have already an account? <a onClick="onLoginSwitchClick()">Login here</a></p>
        </div>
      </div>
    </div>

  <!-- <script type="application/javascript"> -->
    <!-- function getIP(json) { -->
      <!-- document.getElementById('is-repetitive-ip').value = json.ip -->
    <!-- } -->
  <!-- </script> -->
  <!-- <script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script> -->
  <!-- <script data-cfasync="false" type="text/javascript" src="form-submission-handler.js"></script> -->
</body>
</html>